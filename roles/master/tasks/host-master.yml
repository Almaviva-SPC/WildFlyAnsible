- name: Configurazione host-master.xml
  template:
    src: host-master.file
    dest: /opt/wildfly-11.0.0.Final/domain/configuration/host-master.xml
    owner: wildfly
    group: wildfly
- replace:
    path: /opt/wildfly-11.0.0.Final/domain/configuration/host-master.xml
    regexp: "IPMASTER"
    replace: "{{hostvars[item]['ansible_default_ipv4']['address']}}"
  with_items:
    - "{{ groups['master'] }}"
#Host config
- name: Configurazione host.xml
  template:
    src: host.file
    dest: /opt/wildfly-11.0.0.Final/domain/configuration/host.xml
    owner: wildfly
    group: wildfly
- replace:
    path: /opt/wildfly-11.0.0.Final/domain/configuration/host.xml
    regexp: "IPMASTER"
    replace: "{{hostvars[item]['ansible_default_ipv4']['address']}}"
  with_items:
    - "{{ groups['master'] }}"
#widlfly.conf
- name: wildfly config
  template:
    src: wildfly-master.conf
    dest: /etc/default/wildfly.conf
    owner: wildfly
    group: wildfly
#wildfly.service
- name: wildfly service
  template:
    src: wildfly.service
    dest: /etc/systemd/system/wildfly.service
    owner: wildfly
    group: wildfly
- name: reload daemon systemctl
  systemd: daemon_reload=yes
